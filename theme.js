function changeSvgs(arr) {
  function updateSVGs() {
    for (const s of arr) {
      const [selector, pathD, viewBox] = s
      const svgs = document.querySelectorAll(selector);
      svgs.forEach(svg => {
        svg.setAttribute("viewBox", viewBox)
        svg.querySelector("path").setAttribute("d", pathD)
      });
    }

    waitForElement(['.player-controls__left > :first-child', '.main-actionBar-ActionBarRow > button[aria-disabled="false"]'], (els) => {
      for (const el of els) {
        const svg = el.querySelector("svg")
        const label = el.getAttribute("aria-label");
        const path = svg.querySelector("path");

        function changePath() {
          if (label.includes("Activer la lecture aléatoire intelligente") || label.includes("Enable Smart Shuffle")) {
            path.setAttribute("d", "M 64.667969,34.128906 C 63.521778,34.150034 59.023734,38.474969 45.464844,52.25 L 27.5,70.5 l 8.796875,0.289062 c 6.19,0.203 8.948594,0.685047 9.308594,1.623047 0.281,0.733 -1.119328,5.325985 -3.111328,10.208985 -6.271,15.37 -7.972407,20.232676 -7.316407,20.888676 0.937,0.937 36.0285,-34.367395 35.3125,-35.525395 C 70.156234,67.443375 66.335,67 62,67 c -4.335,0 -8.138125,-0.416781 -8.453125,-0.925781 -0.314,-0.509 -0.05197,-2.196 0.582031,-3.75 C 54.762906,60.770219 55.841344,58.15 56.527344,56.5 59.709344,48.848 65,35.189953 65,34.626953 c 0,-0.320375 -0.09414,-0.502432 -0.332031,-0.498047 z m 10.197265,6.197266 c -0.27939,0.0052 -1.376593,0.999859 -4.68164,4.169922 l -4.376953,4.199218 2.144531,0.06836 c 1.508,0.047 2.179578,0.157047 2.267578,0.373047 0.069,0.168 -0.272812,1.225609 -0.757812,2.349609 -1.529,3.538 -1.943204,4.656641 -1.783204,4.806641 0.228,0.216 8.779469,-7.909782 8.605469,-8.175781 -0.082,-0.125 -1.012359,-0.226563 -2.068359,-0.226563 -1.057,0 -1.983547,-0.09589 -2.060547,-0.212891 -0.076,-0.117 -0.01142,-0.505281 0.142578,-0.863281 0.155,-0.358 0.416984,-0.959844 0.583984,-1.339844 0.775,-1.76 2.064453,-4.905156 2.064453,-5.035156 0,-0.07356 -0.02209,-0.114365 -0.08008,-0.113281 z M 31.167969,79.259766 c -0.304869,0.04217 -1.421375,1.059672 -4.664063,4.169922 l -4.376953,4.199218 2.142578,0.06641 c 1.508,0.047 2.179578,0.159 2.267578,0.375 0.069,0.168001 -0.272812,1.22561 -0.757812,2.34961 -1.529,3.538 -1.943203,4.656641 -1.783203,4.80664 0.228,0.216 8.781422,-7.909781 8.607422,-8.175781 -0.082,-0.125 -1.014313,-0.226562 -2.070313,-0.226562 -1.057,0 -1.983547,-0.09589 -2.060547,-0.212891 -0.076,-0.117 -0.01142,-0.505281 0.142578,-0.863281 0.155,-0.358 0.416985,-0.961797 0.583985,-1.341797 0.775,-1.76 2.066406,-4.903203 2.066406,-5.033203 0,-0.08025 -0.0273,-0.123014 -0.09766,-0.113281 z")
            svg.setAttribute("viewBox", "0 0 96 133");
            el.classList.add("transfrom_this_shit_gng");
            el.classList.add("scale_it_bro");
          } else if (label.includes("Désactiver la lecture aléatoire") || label.includes("Disable Shuffle")) {
            path.setAttribute("d", "m 20.310192,0.07407514 c -1.989545,0.051556 -3.294652,0.10780959 -4.210329,0.19729863 -0.915678,0.089489 -1.442042,0.21244835 -1.873985,0.39753327 C 13.738151,0.87783221 12.915955,1.4108909 11.478964,2.475599 10.041854,3.5403069 7.9900664,5.1367818 5.0430353,7.4725393 3.4194319,8.7593257 2.3787991,9.6127598 1.7022292,10.233193 1.0257766,10.853627 0.71362202,11.241178 0.54697513,11.596316 0.26394554,12.199485 0.12031682,12.543349 0.05278901,13.824381 -0.0147388,15.105412 -0.00593081,17.323614 0.0160304,21.675106 l 0.02055195,4.081027 0.02055194,4.081029 0.42982918,1.644155 0.42982918,1.644156 c 0.47915385,1.832764 0.84392135,3.203049 1.11203625,4.174158 0.2681147,0.971108 0.4394592,1.543156 0.5316494,1.779798 0.03394,0.08702 0.1139163,0.220669 0.2155017,0.365706 0.1015854,0.145039 0.2246621,0.301586 0.3446854,0.434527 0.4169109,0.461421 0.2851435,0.67387 2.0571906,0.769348 1.7720471,0.09559 5.447909,0.07446 13.479843,0.0687 8.424651,-0.0061 14.312137,0.01774 18.225814,0.08021 3.913676,0.06259 5.853428,0.163827 6.382728,0.312976 0.481386,0.135526 0.806223,0.269876 1.029242,0.445919 0.223017,0.176158 0.344215,0.394128 0.41832,0.69724 0.05778,0.23617 0.06918,0.572752 0.04051,0.931061 -0.02865,0.358308 -0.09747,0.738343 -0.2,1.06142 l -0.03922,0.123663 -0.03922,0.123664 -9.213494,-0.0317 -9.213494,-0.03171 c -6.965934,-0.02396 -11.60116,-0.03136 -14.539148,-0.01972 -2.9378706,0.01162 -4.1785033,0.04227 -4.3551325,0.09442 -0.4084551,0.12061 -0.6232524,0.205636 -0.7323538,0.463182 -0.1091014,0.257545 -0.1126246,0.687491 -0.09865,1.49806 0.00857,0.498296 0.028068,0.882676 0.060481,1.171813 0.032413,0.289135 0.077863,0.482911 0.1383439,0.599764 0.1186141,0.229243 0.2106869,0.379096 1.5543141,1.817967 1.3437447,1.43887 3.9390433,4.166642 9.0639923,9.552072 0.969818,1.019142 2.25766,2.378505 3.554077,3.750788 1.296416,1.372165 2.601172,2.757131 3.605044,3.827124 0.24322,0.259189 0.702056,0.74586 1.245567,1.320962 0.543393,0.575218 1.171344,1.238988 1.752669,1.85261 1.431942,1.51133 2.686549,2.840748 4.298644,4.558538 1.612094,1.717791 3.58191,3.823719 6.44415,6.887954 2.639339,2.825481 4.289836,4.566524 5.362412,5.630527 1.072577,1.064005 1.567115,1.450968 1.89442,1.568172 0.311214,0.111569 1.338342,0.568526 1.499587,0.482325 0.264239,-0.141515 -0.04098,-34.494143 -0.04098,-34.494143 0,0 1.468229,0.0027 1.482087,0.0027 0.03829,0 0.02419,34.518102 0.0673,34.561086 0.07152,0.0714 0.262007,0.06976 0.684203,-0.0512 0.422314,-0.121081 0.926599,-0.311567 1.326481,-0.518143 0.481737,-0.248973 0.881385,-0.527071 1.570052,-1.193658 0.688548,-0.666588 1.666116,-1.721665 3.303693,-3.5246 0.629712,-0.693363 1.294773,-1.42325 1.858836,-2.040748 0.564063,-0.617498 1.027246,-1.122489 1.253317,-1.365941 0.226071,-0.243453 0.616558,-0.668584 1.063533,-1.15725 0.446976,-0.488667 0.950556,-1.040986 1.4027,-1.538929 1.423956,-1.56829 3.133994,-3.441336 4.762648,-5.218549 1.628771,-1.777215 3.176156,-3.458482 4.275156,-4.643212 4.345738,-4.684788 8.138099,-8.758416 11.070332,-11.892764 2.932234,-3.134348 5.004223,-5.32953 5.90933,-6.257537 0.377921,-0.387552 0.745154,-0.786025 1.032177,-1.115912 0.287023,-0.32977 0.493951,-0.590957 0.551379,-0.703815 0.06847,-0.134234 0.125661,-0.32989 0.170288,-0.580036 0.04463,-0.250147 0.0768,-0.554785 0.09524,-0.906986 0.02455,-0.468701 0.0303,-0.75502 0.0021,-0.981679 -0.02818,-0.226657 -0.09043,-0.393657 -0.201879,-0.623956 -0.07047,-0.145508 -0.163594,-0.296418 -0.25684,-0.422313 -0.09325,-0.125895 -0.186729,-0.226776 -0.257779,-0.272343 -0.11016,-0.07058 -0.831944,-0.110042 -3.432762,-0.126131 -2.60082,-0.01608 -7.080555,-0.0089 -14.706852,0.01398 l -8.940566,0.02677 -8.940446,0.02677 -0.860951,1.071285 c -0.86553,1.077039 -1.785552,2.357484 -2.638634,3.656719 -0.853083,1.299236 -1.639458,2.61726 -2.237695,3.769579 -0.243101,0.468232 -0.540927,0.920843 -0.757838,1.189781 -0.216912,0.269054 -0.353141,0.35455 -0.273165,0.08866 0.01938,-0.06459 0.07058,-0.334703 0.137404,-0.717791 0.06682,-0.383206 0.149383,-0.879389 0.231356,-1.396122 0.276923,-1.745037 0.468702,-2.917789 0.644039,-3.904635 0.175338,-0.986846 0.334234,-1.787902 0.545273,-2.789428 0.166765,-0.791308 0.269407,-1.33611 0.325425,-1.770754 0.05602,-0.434527 0.06542,-0.758896 0.04568,-1.108867 -0.02936,-0.52331 -0.13623,-1.010802 -0.319552,-1.460243 -0.183324,-0.449559 -0.443218,-0.861068 -0.778744,-1.232413 -0.351026,-0.38849 -0.694655,-0.65038 -1.224778,-0.863298 -0.530122,-0.212919 -1.246622,-0.3771 -2.343273,-0.570053 -0.576394,-0.101467 -1.115912,-0.213387 -1.550556,-0.319319 -0.434644,-0.10593 -0.764297,-0.205753 -0.921079,-0.283146 l -0.26424,-0.130123 -0.264239,-0.130124 0.0021,-0.322959 0.002,-0.322958 c 0.0018,-0.271052 0.02936,-0.486787 0.126013,-0.776394 0.09666,-0.289606 0.26236,-0.653199 0.540222,-1.22008 0.608337,-1.240634 1.562887,-2.932118 2.746445,-4.881616 1.183555,-1.94938 2.596238,-4.156777 4.12084,-6.428999 1.131765,-1.686669 4.46529,-5.575801 4.658597,-5.587192 0.193305,-0.01139 -2.449674,13.764045 -1.572166,14.160522 0.300999,0.135996 9.808796,0.0051 9.817252,0.08292 0.0085,0.07787 -1.999175,2.419728 -2.373925,2.887489 -0.374632,0.467762 -1.784379,2.326598 -1.944449,2.563707 -0.508162,0.753024 -4.557481,8.37204 -3.616437,6.746087 l 2.393185,-0.0064 2.159129,-3.781909 h 7.772979 8.936689 8.936689 8.936689 l 0.287139,-0.156312 0.287141,-0.156195 c 0.3064,-0.166765 0.57287,-0.377216 0.797532,-0.629124 0.224662,-0.251908 0.407398,-0.54539 0.546447,-0.878331 0.04721,-0.112977 0.162419,-0.542573 0.310041,-1.143863 0.147621,-0.60129 0.327539,-1.374278 0.504285,-2.173808 0.176748,-0.799412 0.370993,-1.664825 0.541632,-2.415264 0.17064,-0.75044 0.317675,-1.385671 0.399882,-1.724837 0.309219,-1.275981 0.464591,-1.927772 0.549971,-3.323308 0.08526,-1.395535 0.10041,-3.534815 0.129066,-7.785426 l 0.02693,-3.998324 0.02689,-3.998232 -0.133764,-0.421844 -0.133764,-0.421844 C 94.940164,10.730668 94.917498,10.442353 93.871698,9.5279683 92.825898,8.6135831 90.75708,7.0733619 86.429194,3.82639 84.885215,2.6682 84.008762,2.0165273 83.405945,1.598677 82.803127,1.180944 82.47406,0.99703346 82.025206,0.77425042 81.317632,0.42298838 80.782695,0.23649419 79.106713,0.13655303 77.430732,0.03649444 74.613706,0.02287144 69.341723,0.01723433 L 64.879015,0.01241931 60.416308,0.00760428 59.82911,0.20549011 59.241912,0.40337595 C 58.587537,0.62381021 57.986128,0.86256504 57.397287,1.1386657 56.808444,1.4146489 56.232168,1.7278605 55.628293,2.0972084 55.052485,2.4494099 53.902047,3.2706655 52.79647,4.097793 51.690893,4.9249206 50.630061,5.7578027 50.233467,6.1331399 49.79389,6.5492286 49.426891,6.8226281 49.048148,6.9910367 48.669406,7.1594452 48.278683,7.2227451 47.791544,7.2187521 47.17616,7.2137026 46.937171,7.2508132 46.310865,6.888277 45.684559,6.5256233 44.671054,5.7632049 42.506758,4.1588617 40.919679,2.9824686 39.995898,2.3087171 39.323204,1.866322 38.650393,1.4240442 38.22855,1.2131225 37.645108,0.9625062 36.604007,0.51529595 36.002715,0.28241309 34.918629,0.15780961 33.834544,0.03320613 32.267429,0.01699945 29.294796,0.00314157 27.841481,-0.00366992 26.104078,9.1022123e-4 24.475777,0.01382859 22.847358,0.02674694 21.328041,0.04788609 20.310662,0.07431002 M 22.6106,52.150699 l 0.907574,0.968524 0.907574,0.968644 c 0.499119,0.532822 1.098296,1.169111 1.661418,1.765235 0.563124,0.596124 1.09031,1.151965 1.445565,1.523662 0.355256,0.371697 0.909218,0.953963 1.515442,1.592599 0.606223,0.638637 1.264943,1.333763 1.829593,1.931178 1.808922,1.91368 2.871635,3.035816 3.691833,3.892773 0.820199,0.856956 1.397767,1.448735 2.236285,2.301582 0.452497,0.460128 0.872461,0.878566 1.18438,1.181912 0.311919,0.303348 0.515913,0.491604 0.5367,0.491604 0.20129,0 0.323663,-0.683147 0.374984,-2.294537 0.05132,-1.611389 0.0316,-4.151023 -0.05144,-7.863994 -0.06271,-2.80493 -0.09971,-4.306044 -0.147035,-5.133288 -0.04732,-0.827363 -0.104991,-0.980857 -0.209043,-1.090781 -0.0983,-0.103933 -0.20681,-0.164768 -0.495007,-0.208337 -0.288315,-0.04357 -0.756313,-0.06976 -1.573692,-0.104287 -1.141866,-0.04815 -4.320605,-0.07106 -7.293355,-0.06976 -2.972752,0.0014 -5.739395,0.02701 -6.057187,0.07587 m 33.551457,0.01879 c -0.265297,0.104756 -0.402349,0.208456 -0.477159,1.072342 -0.07481,0.863887 -0.08737,2.487959 -0.103582,5.63358 -0.01691,3.299351 -0.0024,5.66811 0.04815,7.250256 0.0505,1.582147 0.13717,2.377801 0.264474,2.531178 0.07316,0.08831 0.125543,0.125191 0.218909,0.0828 0.09336,-0.04239 0.227714,-0.164064 0.464942,-0.393189 0.326366,-0.315325 2.028419,-2.106397 4.260947,-4.476329 2.232645,-2.369933 4.995766,-5.318491 7.4445,-7.948905 0.195419,-0.209983 0.466823,-0.506516 0.746565,-0.815148 0.27974,-0.308632 0.56782,-0.629359 0.796828,-0.887727 0.229007,-0.25825 0.485495,-0.547621 0.714385,-0.805518 0.228772,-0.258015 0.429947,-0.484674 0.548091,-0.617733 0.118261,-0.133176 0.225718,-0.269172 0.303699,-0.381093 0.07787,-0.111919 0.126248,-0.199645 0.126248,-0.236288 0,-0.08221 -3.735404,-0.12519 -7.522599,-0.127186 -3.787312,-0.002 -7.626531,0.03699 -7.834399,0.119083")
            svg.setAttribute("viewBox", "0 0 96 132");
            el.classList.add("transfrom_this_shit_gng");
            el.classList.remove("scale_it_bro");
          } else {
            path.setAttribute("d", "M 45.750 51.092 C 35.987 60.940, 28 69.448, 28 69.998 C 28 70.580, 31.252 71.006, 35.750 71.015 C 46.365 71.036, 46.905 71.527, 43.979 78.500 C 40.256 87.374, 37.812 93.477, 35.668 99.260 L 33.163 106.020 35.831 104.078 C 37.299 103.009, 46.125 94.474, 55.445 85.111 C 66.883 73.620, 71.921 67.917, 70.945 67.565 C 70.150 67.277, 66.125 66.920, 62 66.771 L 54.500 66.500 54.706 63.500 C 54.819 61.850, 56.018 58.025, 57.370 55 C 64.123 39.891, 66.438 32.954, 64.680 33.093 C 64.031 33.144, 55.513 41.244, 45.750 51.092")
            svg.setAttribute("viewBox", "0 0 96 132");
            el.classList.remove("transfrom_this_shit_gng");
            el.classList.add("scale_it_bro");
          }
        }

        changePath()
        el.addEventListener("click", () => setTimeout(changePath, 200))
      }
    })

    waitForElement(['[data-testid="control-button-repeat"]'], ([el]) => {
      const svg = el.querySelector("svg")
      svg.setAttribute("viewBox", "0 0 111 103")
      const path = svg.querySelector("path");

      function changePath() {
        if (el.getAttribute("aria-checked") == "true") {
          svg.setAttribute("viewBox", "0 0 111 103")
          path.setAttribute("d", "M 18.650391 8.4082031 C 17.688391 8.9752031 16.900391 10.037578 16.900391 10.767578 C 16.900391 12.943578 14.446375 14.485438 13.109375 13.148438 C 12.251375 12.290438 11.770594 12.484828 11.183594 13.923828 C 10.752594 14.977828 10.400391 33.254063 10.400391 54.539062 C 10.400391 84.781063 10.6815 93.520344 11.6875 94.527344 C 12.6975 95.536344 21.837031 95.819125 53.832031 95.828125 C 92.614031 95.839125 94.795922 95.743547 96.794922 93.935547 C 98.870922 92.057547 98.900391 91.451641 98.900391 50.806641 C 98.900391 18.226641 98.628563 9.3598125 97.601562 8.5078125 C 95.845562 7.0498125 21.116391 6.9552031 18.650391 8.4082031 z M 57.400391 10.339844 C 77.108391 10.339844 92.984641 10.587625 92.681641 10.890625 C 91.993641 11.578625 22.757359 11.529797 22.068359 10.841797 C 21.792359 10.565797 37.692391 10.339844 57.400391 10.339844 z M 94.25 11.517578 C 94.344491 11.508986 94.451719 11.559453 94.566406 11.673828 C 94.932406 12.040828 94.932406 12.640813 94.566406 13.007812 C 94.199406 13.373812 93.900391 13.072844 93.900391 12.339844 C 93.900391 11.835906 94.04212 11.536482 94.25 11.517578 z M 17.900391 14.490234 L 53.224609 14.498047 C 72.653609 14.502047 89.060594 14.821031 89.683594 15.207031 C 91.066594 16.061031 92.106172 57.786844 91.201172 76.089844 L 90.595703 88.339844 L 54.806641 88.339844 C 35.122641 88.339844 18.807781 87.999031 18.550781 87.582031 C 17.991781 86.679031 17.631109 61.479062 17.787109 34.164062 L 17.900391 14.490234 z M 94.742188 14.845703 C 95.104187 14.292703 95.518109 30.673047 95.662109 51.248047 C 95.899109 84.994047 95.761812 88.836047 94.257812 90.498047 C 92.693813 92.226047 90.230187 92.339844 54.367188 92.339844 C 23.381187 92.339844 15.931578 92.082469 15.017578 90.980469 C 14.231578 90.032469 13.863688 78.778469 13.804688 53.730469 C 13.758687 33.990469 13.865969 17.164844 14.042969 16.339844 C 14.219969 15.514844 14.597812 31.939844 14.882812 52.839844 L 15.400391 90.839844 L 53.400391 91.080078 C 74.300391 91.213078 91.981406 90.951094 92.691406 90.496094 C 93.708406 89.846094 93.994203 81.795719 94.033203 52.761719 C 94.060203 32.461719 94.380187 15.398703 94.742188 14.845703 z M 50.638672 17.5625 C 47.301787 17.664629 44.132797 18.215891 41.591797 19.244141 C 33.048797 22.701141 26.340734 28.781844 22.177734 36.839844 C 19.867734 41.312844 19.614625 42.873672 19.765625 51.638672 C 19.959625 62.836672 21.490328 67.145453 27.736328 74.064453 C 30.804328 77.462453 31.808094 78.049453 32.871094 77.064453 C 33.342625 76.627484 33.638777 76.445343 33.708984 76.519531 C 33.748219 76.568592 33.705312 76.713203 33.570312 76.955078 C 32.723312 78.474078 35.538906 80.828469 40.628906 82.855469 C 47.040906 85.409469 66.102547 84.199281 68.060547 81.113281 C 68.505547 80.413281 68.875766 80.230031 68.884766 80.707031 C 68.885016 80.721937 68.890653 80.736786 68.896484 80.746094 C 69.097774 81.012101 71.917426 78.643352 75.330078 75.330078 C 81.900078 68.952078 85.635891 62.402891 86.087891 56.462891 C 86.258891 54.218891 86.829281 53.339844 88.113281 53.339844 C 89.096281 53.339844 89.900391 52.881313 89.900391 52.320312 C 89.900391 51.150312 85.117391 43.339844 84.400391 43.339844 C 83.642391 43.339844 78.900391 51.1835 78.900391 52.4375 C 78.900391 53.0625 79.739625 53.353938 80.765625 53.085938 C 82.456625 52.642938 82.547281 52.966453 81.738281 56.564453 C 78.832281 69.500453 71.088516 77.946672 60.353516 79.888672 C 58.179516 80.281672 55.609531 81.010766 54.644531 81.509766 C 53.492531 82.103766 51.319313 81.883234 48.320312 80.865234 C 45.807313 80.011234 43.335172 79.571719 42.826172 79.886719 C 42.317172 80.201719 41.900391 79.980437 41.900391 79.398438 C 41.900391 78.816437 41.085844 78.339844 40.089844 78.339844 C 39.092844 78.339844 37.269109 77.401906 36.037109 76.253906 C 34.805109 75.105906 33.121875 74.424234 32.296875 74.740234 C 31.452875 75.064234 31.061344 74.886984 31.402344 74.333984 C 31.736344 73.793984 30.828813 71.800297 29.382812 69.904297 C 20.974812 58.880297 20.987969 44.059531 29.417969 33.019531 C 38.170969 21.555531 54.808031 18.407312 67.457031 25.820312 C 69.713031 27.142312 72.140563 28.92525 72.851562 29.78125 C 74.464562 31.72525 77.900391 31.826688 77.900391 29.929688 C 77.900391 28.024688 72.716078 23.786734 66.580078 20.677734 C 62.226953 18.471484 56.200146 17.392285 50.638672 17.5625 z M 38.458984 22.339844 C 39.292984 22.339844 38.897141 23.223547 37.744141 23.935547 C 37.029141 24.378547 36.861688 24.209141 37.304688 23.494141 C 37.696687 22.859141 38.215984 22.339844 38.458984 22.339844 z M 43.242188 33.9375 L 40.017578 37.265625 L 36.791016 40.59375 L 37.070312 54.515625 L 37.349609 68.4375 L 40.349609 68.4375 C 43.224609 68.4375 43.36225 68.237047 43.65625 63.623047 C 44.04025 57.617047 46.312641 57.739438 46.431641 63.773438 C 46.551641 69.874437 47.849609 70.176516 47.849609 64.103516 C 47.849609 60.530516 48.251391 58.9375 49.150391 58.9375 C 50.045391 58.9375 50.410266 60.354375 50.322266 63.484375 C 50.252266 65.985375 50.568437 68.263922 51.023438 68.544922 C 51.478437 68.825922 51.849609 66.778094 51.849609 63.996094 C 51.849609 61.214094 52.299609 58.9375 52.849609 58.9375 C 53.399609 58.9375 53.883828 59.2745 53.923828 59.6875 C 53.964828 60.1005 54.145172 62.155859 54.326172 64.255859 C 54.828172 70.090859 55.849609 69.932531 55.849609 64.019531 C 55.849609 60.263531 56.205609 58.889453 57.099609 59.189453 C 57.826609 59.433453 58.349609 61.313547 58.349609 63.685547 C 58.349609 65.928547 58.686609 68.103578 59.099609 68.517578 C 59.512609 68.931578 59.849609 66.907531 59.849609 64.019531 C 59.849609 60.265531 60.205609 58.8895 61.099609 59.1875 C 61.833609 59.4325 62.374156 61.424531 62.410156 64.019531 C 62.469156 68.237531 62.615156 68.451 65.660156 68.75 L 68.849609 69.064453 L 68.849609 51.5 L 68.849609 33.9375 L 56.046875 33.9375 L 43.242188 33.9375 z M 54.943359 36.929688 C 55.524018 36.917222 55.853266 38.105328 55.416016 40.4375 C 54.805016 43.6925 54.936687 43.9375 57.304688 43.9375 C 61.051688 43.9375 60.407609 45.910656 56.599609 46.097656 L 53.349609 46.257812 L 56.599609 46.660156 C 58.387609 46.882156 59.849609 47.485 59.849609 48 C 59.849609 48.962 58.413078 49.322516 55.955078 48.978516 C 54.209078 48.733516 52.885234 50.7525 52.865234 53.6875 C 52.856234 55.0435 52.235687 55.9375 51.304688 55.9375 C 50.079688 55.9375 49.896016 55.2105 50.416016 52.4375 C 51.040016 49.1115 50.933719 48.9375 48.261719 48.9375 C 44.959719 48.9375 46.075609 47.335203 49.849609 46.658203 C 50.766609 46.493703 51.259025 46.382833 51.294922 46.300781 L 51.296875 46.298828 L 51.296875 46.296875 L 51.296875 46.294922 C 51.296904 46.294207 51.296919 46.289773 51.296875 46.289062 L 51.296875 46.287109 L 51.296875 46.285156 L 51.296875 46.283203 L 51.294922 46.28125 C 51.239976 46.188965 50.525977 46.131937 49.099609 46.072266 C 44.913609 45.897266 44.871969 44.16 49.042969 43.75 C 51.701969 43.489 52.374313 42.8945 53.070312 40.1875 C 53.629766 38.012656 54.397892 36.941398 54.943359 36.929688 z M 86.517578 49.964844 C 86.52322 50.223343 86.423003 50.421118 86.216797 50.560547 A 2.5309999 2.8610001 0 0 0 86.517578 49.964844 z M 81.923828 50.150391 A 2.5309999 2.8610001 0 0 0 82.0625 50.419922 C 82.008967 50.408734 81.954913 50.398378 81.900391 50.386719 C 81.797343 50.36461 81.812428 50.278773 81.923828 50.150391 z ");
        } else if (el.getAttribute("aria-checked") == "mixed") {
          svg.setAttribute("viewBox", "0 0 111 103")
          path.setAttribute("d", "M 24.128906 3.0800781 C 23.015086 3.1184722 21.300297 4.5247969 18.490234 7.1152344 C 13.722234 11.510234 13.518406 13.220391 17.816406 12.775391 C 20.345406 12.513391 20.486172 12.735078 20.576172 17.080078 C 20.688172 22.449078 21.443312 24 23.945312 24 C 26.207313 24 27.293234 18.073328 26.490234 10.111328 C 25.999172 5.2440156 25.560961 3.0307144 24.128906 3.0800781 z M 23.75 5.0371094 C 23.887 5.0161094 23.908828 9.162 23.798828 14.25 L 23.597656 23.5 L 23.257812 15.75 C 23.069812 11.487 22.467922 8 21.919922 8 C 21.370922 8 21.500938 7.3411094 22.210938 6.5371094 C 22.919938 5.7331094 23.613 5.0581094 23.75 5.0371094 z M 35.992188 8.0058594 C 35.247188 8.4658594 35.340109 9.0362656 36.287109 9.8222656 C 37.239109 10.612266 46.799984 11.051375 67.083984 11.234375 L 96.5 11.5 L 96.761719 52.25 L 97.021484 93 L 56.011719 93 L 15 93 L 14.964844 90.75 C 14.946844 89.513 14.833844 75.45 14.714844 59.5 C 14.529844 34.485 14.294 30.5 13 30.5 C 11.698 30.5 11.5 34.719703 11.5 62.470703 L 11.5 94.441406 L 14 95.763672 C 16.011 96.827672 24.307125 96.964891 56.453125 96.462891 C 94.751125 95.864891 96.477625 95.756844 98.140625 93.839844 C 99.722625 92.015844 99.882797 88.245406 99.966797 51.066406 C 100.0428 17.375406 99.817969 10.092672 98.667969 9.1386719 C 97.134969 7.8656719 37.949187 6.7958594 35.992188 8.0058594 z M 35.359375 11.230469 C 35.219549 11.227261 35.107016 11.581266 35.078125 12.214844 C 34.917125 15.716844 38.256422 16.106719 64.357422 15.636719 C 78.281422 15.385719 90.298547 15.566109 91.060547 16.037109 C 92.200547 16.741109 92.450656 23.352266 92.472656 53.197266 L 92.5 89.5 L 81.5 89.310547 C 75.45 89.206547 59.494922 88.889422 46.044922 88.607422 C 29.357922 88.257422 21.177922 88.436922 20.294922 89.169922 C 19.582922 89.760922 18.948766 90.076094 18.884766 89.871094 C 18.821766 89.667094 18.648906 76 18.503906 59.5 C 18.357906 43 18.177516 29.275 18.103516 29 C 18.029516 28.725 17.533 29.175 17 30 C 15.42 32.444 15.698875 89.506031 17.296875 90.832031 C 18.168875 91.555031 30.753203 91.929609 55.658203 91.974609 C 86.424203 92.029609 92.919578 91.801906 93.892578 90.628906 C 94.736578 89.611906 95.115187 78.651875 95.242188 51.546875 C 95.393187 19.490875 95.202937 13.734781 93.960938 12.925781 C 93.099938 12.365781 80.899047 12.083281 64.248047 12.238281 C 46.110047 12.406281 35.848125 12.142 35.578125 11.5 C 35.502328 11.319531 35.427662 11.232035 35.359375 11.230469 z M 54.457031 17.994141 C 50.961531 17.859391 47.334297 18.136828 46.091797 18.923828 C 45.316797 19.413828 44.004734 19.555281 43.177734 19.238281 C 42.204734 18.864281 41.925672 19.069359 42.388672 19.818359 C 42.856672 20.574359 42.566734 20.771812 41.552734 20.382812 C 40.696734 20.053812 40 20.308172 40 20.951172 C 40 21.592172 39.617391 21.88175 39.150391 21.59375 C 38.684391 21.30475 37.446391 21.848781 36.400391 22.800781 C 35.355391 23.752781 33.202234 25.536625 31.615234 26.765625 C 30.028234 27.994625 29.096922 29 29.544922 29 C 29.992922 29 28.851812 30.347141 27.007812 31.994141 C 25.163812 33.640141 23.953359 35.286344 24.318359 35.652344 C 24.684359 36.017344 24.485906 36.913531 23.878906 37.644531 C 23.272906 38.375531 23.029891 39.631547 23.337891 40.435547 C 23.684891 41.339547 23.421437 41.714969 22.648438 41.417969 C 20.650437 40.651969 20.481734 56.925203 22.427734 62.783203 C 23.289734 65.378203 23.971359 67.861687 23.943359 68.304688 C 23.834359 70.016687 34.771719 79.623516 39.511719 81.978516 C 46.733719 85.565516 57.422187 85.955781 65.492188 82.925781 C 74.038188 79.716781 81.751437 71.745 84.773438 63 C 87.263437 55.794 87.641703 52.486703 85.845703 53.595703 C 85.171703 54.012703 84.960844 53.872766 85.339844 53.259766 C 85.696844 52.682766 85.204141 51.906109 84.244141 51.537109 C 82.592141 50.900109 82.593484 50.813094 84.271484 49.871094 C 85.245484 49.324094 85.741047 48.342453 85.373047 47.689453 C 85.210734 47.399664 85.152399 47.223415 85.1875 47.166016 C 85.191485 47.160641 85.199081 47.153353 85.205078 47.150391 C 85.29722 47.114683 85.599016 47.330594 86.095703 47.792969 C 87.270703 48.885969 87.272375 49.212641 86.109375 49.931641 C 85.041375 50.591641 85.328437 51.168391 87.398438 52.525391 C 90.947437 54.850391 91.706375 53.799344 89.109375 50.152344 C 87.949375 48.523344 87 46.472703 87 45.595703 C 87 43.029703 85.04225 43.759047 83.90625 46.748047 C 83.33125 48.260047 82.137906 50.294484 81.253906 51.271484 C 80.021906 52.632484 79.922219 53.322609 80.824219 54.224609 C 81.725219 55.125609 82 55.119219 82 54.199219 C 82 53.539219 82.490844 53 83.089844 53 C 84.253844 53 83.645828 60.1575 82.298828 62.3125 C 81.889828 62.9655 81.481625 63.99275 81.390625 64.59375 C 81.023625 66.99775 76.045141 73.724375 72.869141 76.109375 C 64.005141 82.766375 51.547453 84.451391 42.064453 80.275391 C 39.003453 78.927391 35.788922 77.189156 34.919922 76.410156 C 34.049922 75.632156 33.037922 75.222047 32.669922 75.498047 C 32.480172 75.640359 32.36075 75.693677 32.326172 75.666016 L 32.324219 75.664062 C 32.323323 75.663074 32.321056 75.659342 32.320312 75.658203 C 32.303785 75.62213 32.347219 75.526578 32.457031 75.376953 C 32.708031 75.033953 31.754891 73.233953 30.337891 71.376953 C 28.921891 69.518953 28.127266 68 28.572266 68 C 29.018266 68 28.552109 67.393344 27.537109 66.652344 C 26.523109 65.910344 25.995281 64.815703 26.363281 64.220703 C 26.731281 63.624703 26.568 62.851 26 62.5 C 25.432 62.149 25.225969 61.443641 25.542969 60.931641 C 25.858969 60.419641 25.615 60 25 60 C 24.385 60 24.172344 59.529078 24.527344 58.955078 C 24.882344 58.381078 24.624078 57.253266 23.955078 56.447266 C 23.154078 55.482266 22.973828 53.532234 23.423828 50.740234 C 23.799828 48.408234 24.158703 45.938 24.220703 45.25 C 24.282703 44.563 24.610219 44 24.949219 44 C 25.287219 44 25.660344 42.838922 25.777344 41.419922 C 26.168344 36.701922 35.453047 25.937359 38.373047 26.818359 C 38.853047 26.962359 38.9375 26.276016 38.5625 25.291016 C 38.0525 23.951016 38.169391 23.785766 39.025391 24.634766 C 40.224391 25.823766 44 25.332328 44 23.986328 C 44 23.557328 48.388 23.346578 53.75 23.517578 C 65.153 23.881578 66 24.005031 66 25.332031 C 66 25.882031 66.272469 26.059562 66.605469 25.726562 C 66.939469 25.392563 68.149922 25.993547 69.294922 27.060547 C 70.439922 28.127547 71.950344 29 72.652344 29 C 73.354344 29 74.402469 29.882891 74.980469 30.962891 C 75.598469 32.115891 76.643625 32.690469 77.515625 32.355469 C 79.021625 31.777469 79.626 29.006234 78.25 28.990234 C 77.838 28.986234 75.813 27.382734 73.75 25.427734 C 71.688 23.472734 70 22.181594 70 22.558594 C 70 22.935594 69.255703 22.627047 68.345703 21.873047 C 67.436703 21.118047 65.930047 20.629109 64.998047 20.787109 C 64.067047 20.945109 62.73225 20.382109 62.03125 19.537109 C 61.31575 18.675109 57.952531 18.128891 54.457031 17.994141 z M 42.802734 35.697266 L 39.576172 39.025391 L 36.351562 42.353516 L 36.630859 56.275391 L 36.910156 70.197266 L 39.910156 70.197266 C 42.785156 70.197266 42.922797 69.998766 43.216797 65.384766 C 43.600797 59.378766 45.873188 59.501156 45.992188 65.535156 C 46.112188 71.636156 47.410156 71.938234 47.410156 65.865234 C 47.410156 62.292234 47.811938 60.697266 48.710938 60.697266 C 49.605937 60.697266 49.970812 62.116094 49.882812 65.246094 C 49.812812 67.747094 50.127031 70.023688 50.582031 70.304688 C 51.037031 70.585687 51.410156 68.539812 51.410156 65.757812 C 51.410156 62.975812 51.860156 60.697266 52.410156 60.697266 C 52.960156 60.697266 53.442422 61.034266 53.482422 61.447266 C 53.523422 61.860266 53.705719 63.917578 53.886719 66.017578 C 54.388719 71.852578 55.410156 71.69425 55.410156 65.78125 C 55.410156 62.02525 55.766156 60.649219 56.660156 60.949219 C 57.387156 61.193219 57.910156 63.075266 57.910156 65.447266 C 57.910156 67.690266 58.247156 69.863344 58.660156 70.277344 C 59.073156 70.691344 59.410156 68.66925 59.410156 65.78125 C 59.410156 62.02725 59.766156 60.649266 60.660156 60.947266 C 61.394156 61.192266 61.934703 63.18625 61.970703 65.78125 C 62.029703 69.99925 62.175703 70.212719 65.220703 70.511719 L 68.410156 70.824219 L 68.410156 53.261719 L 68.410156 35.697266 L 55.605469 35.697266 L 42.802734 35.697266 z M 54.501953 38.691406 C 55.082612 38.67894 55.413812 39.865094 54.976562 42.197266 C 54.365563 45.452266 54.497234 45.697266 56.865234 45.697266 C 60.612234 45.697266 59.968156 47.670422 56.160156 47.857422 L 52.910156 48.017578 L 56.160156 48.421875 C 57.948156 48.643875 59.410156 49.246719 59.410156 49.761719 C 59.410156 50.723719 57.973625 51.084234 55.515625 50.740234 C 53.769625 50.495234 52.445781 52.512266 52.425781 55.447266 C 52.416781 56.803266 51.796234 57.697266 50.865234 57.697266 C 49.640234 57.697266 49.456563 56.970266 49.976562 54.197266 C 50.600563 50.871266 50.492313 50.697266 47.820312 50.697266 C 44.518312 50.697266 45.636156 49.096922 49.410156 48.419922 C 50.335344 48.253953 50.827483 48.140864 50.855469 48.058594 L 50.857422 48.056641 L 50.857422 48.054688 L 50.857422 48.052734 L 50.857422 48.050781 L 50.857422 48.048828 L 50.857422 48.046875 L 50.855469 48.044922 L 50.855469 48.042969 C 50.800523 47.950684 50.086523 47.893656 48.660156 47.833984 C 44.474156 47.658984 44.430563 45.921719 48.601562 45.511719 C 51.260562 45.250719 51.934859 44.654266 52.630859 41.947266 C 53.190312 39.772422 53.956486 38.703117 54.501953 38.691406 z ");
        } else {
          svg.setAttribute("viewBox", "0 0 111 103")
          path.setAttribute("d", "M 58.451172 9 C 33.616172 9 18.893812 9.3642813 18.507812 9.9882812 C 18.110812 10.631281 31.626266 11.068281 57.197266 11.238281 L 96.5 11.5 L 96.761719 52.25 L 97.021484 93 L 56.011719 93 L 15 93 L 14.964844 90.75 C 14.945844 89.513 14.833844 71.513953 14.714844 50.751953 C 14.574844 26.193953 14.151 13.089953 13.5 13.251953 C 11.899 13.650953 11.719406 92.522656 13.316406 93.847656 C 15.291406 95.487656 95.510562 95.651531 97.476562 94.019531 C 98.794562 92.925531 99 87.329984 99 52.458984 C 99 30.296984 98.726578 11.452031 98.392578 10.582031 C 97.853578 9.1770312 93.396172 9 58.451172 9 z M 93.658203 11.994141 L 56.458984 12.025391 C 21.925984 12.054391 19.141906 12.186422 17.628906 13.857422 C 16.184906 15.453422 16 19.863906 16 52.628906 C 16 80.050906 16.309219 89.910781 17.199219 90.800781 C 18.089219 91.690781 27.995125 92 55.578125 92 C 87.982125 92 92.920922 91.799313 94.044922 90.445312 C 95.811922 88.316312 96.513781 17.623094 94.800781 14.246094 L 93.658203 11.994141 z M 55.693359 14.314453 L 92.5 14.5 L 92.761719 52.261719 L 93.023438 90.023438 L 55.761719 89.761719 L 18.5 89.5 L 18.236328 53.003906 C 18.092328 32.931906 18.180641 15.972359 18.431641 15.318359 C 18.775641 14.422359 28.011359 14.174453 55.693359 14.314453 z M 44.392578 35 L 41.167969 38.328125 L 37.941406 41.65625 L 38.220703 55.578125 L 38.5 69.5 L 41.5 69.5 C 44.375 69.5 44.512641 69.299547 44.806641 64.685547 C 45.190641 58.679547 47.463031 58.803891 47.582031 64.837891 C 47.702031 70.938891 49 71.240969 49 65.167969 C 49 61.594969 49.401781 60 50.300781 60 C 51.195781 60 51.560656 61.418828 51.472656 64.548828 C 51.402656 67.049828 51.718828 69.326422 52.173828 69.607422 C 52.628828 69.888422 53 67.840594 53 65.058594 C 53 62.276594 53.45 60 54 60 C 54.55 60 55.032266 60.337 55.072266 60.75 C 55.113266 61.163 55.295563 63.218359 55.476562 65.318359 C 55.978563 71.153359 57 70.995031 57 65.082031 C 57 61.326031 57.356 59.951953 58.25 60.251953 C 58.977 60.495953 59.5 62.376047 59.5 64.748047 C 59.5 66.991047 59.837 69.166078 60.25 69.580078 C 60.663 69.994078 61 67.970031 61 65.082031 C 61 61.328031 61.356 59.952 62.25 60.25 C 62.984 60.495 63.524547 62.487031 63.560547 65.082031 C 63.619547 69.300031 63.765547 69.5135 66.810547 69.8125 L 70 70.126953 L 70 52.5625 L 70 35 L 57.195312 35 L 44.392578 35 z M 56.091797 37.992188 C 56.672456 37.979722 57.003656 39.167828 56.566406 41.5 C 55.955406 44.755 56.087078 45 58.455078 45 C 62.202078 45 61.558 46.973156 57.75 47.160156 L 54.5 47.320312 L 57.75 47.722656 C 59.538 47.944656 61 48.5475 61 49.0625 C 61 50.0245 59.563469 50.386969 57.105469 50.042969 C 55.359469 49.797969 54.035625 51.815 54.015625 54.75 C 54.006625 56.106 53.386078 57 52.455078 57 C 51.230078 57 51.046406 56.273 51.566406 53.5 C 52.190406 50.174 52.082156 50 49.410156 50 C 46.108156 50 47.226 48.397703 51 47.720703 C 51.917 47.556203 52.409415 47.445333 52.445312 47.363281 L 52.447266 47.361328 L 52.447266 47.359375 L 52.447266 47.357422 L 52.447266 47.355469 L 52.447266 47.353516 L 52.447266 47.351562 C 52.447075 47.350861 52.445576 47.3464 52.445312 47.345703 L 52.445312 47.34375 C 52.390367 47.251465 51.676367 47.196391 50.25 47.136719 C 46.064 46.961719 46.020406 45.2225 50.191406 44.8125 C 52.850406 44.5515 53.524703 43.957 54.220703 41.25 C 54.780156 39.075156 55.546329 38.003898 56.091797 37.992188 z ");
        }

        if (svg.children.length > 1) {
          svg.lastChild.remove()
        }
      }

      changePath()
      el.addEventListener("click", () => { setTimeout(changePath, 1) });
    })

    for (const img of document.querySelectorAll('img[src="https://misc.scdn.co/liked-songs/liked-songs-300.jpg"]')) {
      img.removeAttribute("srcset")
      img.setAttribute("src", `https://github.com/me974974/CyberNight/blob/main/assets/liked.png?raw=true`)
    }

    for (const img of document.querySelectorAll('img[src="https://misc.spotifycdn.com/your-episodes/SE-300.png"]')) {
      img.removeAttribute("srcset")
      img.setAttribute("src", `https://github.com/me974974/CyberNight/blob/main/assets/episodes.png?raw=true`)
    }

    function patchVosEpisodesHeader() {
      const selectors = [
        '[data-testid="your-episodes"] .main-entityHeader-imageContainer',
        'section[aria-label*="épisodes" i] .main-entityHeader-imageContainer',
        '.main-entityHeader-image svg[data-encore-id="icon"]'
      ];

      document.querySelectorAll(selectors.join(', ')).forEach(el => {
        const container = el.closest('.main-entityHeader-imageContainer') || el;
        if (!container) return;

        // Supprime le SVG s'il existe
        const svg = container.querySelector('svg');
        if (svg) svg.remove();

        // Évite les doublons
        if (container.dataset.patched === 'true') return;
        container.dataset.patched = 'true';

        

        // Option img element (parfois plus net)
        
        const img = document.createElement('img');
        img.src = 'https://github.com/me974974/CyberNight/blob/main/assets/episodes.png?raw=true';
        img.style.width = '100%';
        img.style.height = '100%';
        img.style.objectFit = 'cover';
        img.style.borderRadius = '12px';
        container.appendChild(img);
        

        // Nettoie les styles placeholder
        const shadowDiv = container.querySelector('.main-entityHeader-shadow, [class*="shadow"]');
        if (shadowDiv) {
          shadowDiv.style.boxShadow = 'none';
          shadowDiv.style.background = 'transparent';
        }
      });
    }

    // Exécuter plusieurs fois car Spotify charge dynamiquement
    setTimeout(patchVosEpisodesHeader, 1000);
    setTimeout(patchVosEpisodesHeader, 3000);
    setTimeout(patchVosEpisodesHeader, 6000);

    // Observer permanent (très efficace)
    const observer = new MutationObserver(patchVosEpisodesHeader);
    observer.observe(document.body, { childList: true, subtree: true });
  }

  const observer = new MutationObserver(() => {
    updateSVGs();
  });

  observer.observe(document.body, {
    childList: true,
    subtree: true
  });

  updateSVGs();
}

changeSvgs([
  ['button[aria-label*="options"] svg, [data-testid="now-playing-widget"]>*>*:not([role="switch"]) svg, .main-trackList-rowSectionEnd>*:not([role="switch"]) svg, .Button-buttonTertiary-textBrightAccent-medium-iconOnly-useBrowserDefaultFocusStyle-condensed svg, .main-nowPlayingView-contextItemInfo [aria-checked="false"]:not([role="switch"]) svg',
    "M 56.666 8.477 C 55.853 9.290, 54.684 13.227, 54.068 17.227 C 53.452 21.227, 52.509 26.975, 51.974 30 C 51.438 33.025, 50.570 41.575, 50.044 49 C 49.518 56.425, 48.545 68.847, 47.882 76.606 C 47.218 84.364, 46.959 91.451, 47.306 92.356 C 47.721 93.437, 49.106 94, 51.354 94 C 55.373 94, 57.211 91.765, 58.768 84.985 C 59.335 82.518, 61.235 75.100, 62.992 68.500 C 64.748 61.900, 67.024 53.350, 68.048 49.500 C 73.035 30.759, 77.376 9.418, 76.492 7.988 C 75.469 6.332, 58.389 6.754, 56.666 8.477 M 39.475 103.750 C 39.069 104.713, 38.167 108.650, 37.471 112.500 C 35.626 122.710, 36.098 123.234, 46.655 122.694 C 52.103 122.415, 55.638 121.761, 56.468 120.879 C 57.882 119.377, 60.366 104.401, 59.448 102.915 C 59.136 102.412, 54.682 102, 49.548 102 C 41.607 102, 40.104 102.261, 39.475 103.750", "0 0 115 137"],
])

changeSvgs([
  ['button[aria-label*="Ajouter"] svg, button[aria-label*="add"] svg',
    "M 28.713 24.178 C 27.208 26.799, 27 30.546, 27 54.999 L 27 82.837 30.750 85.116 C 32.813 86.369, 34.725 87.682, 35 88.033 C 35.275 88.384, 38.142 89.870, 41.371 91.335 C 47.024 93.901, 47.901 94, 65 94 C 82.109 94, 82.971 93.903, 88.575 91.337 C 91.774 89.873, 95.893 87.655, 97.728 86.410 C 99.564 85.164, 101.586 83.971, 102.223 83.759 C 103.052 83.483, 103.455 75.660, 103.647 56.134 C 103.899 30.303, 103.807 28.691, 101.856 24.948 L 99.798 21 86.833 21 C 79.703 21, 73 21.465, 71.939 22.033 C 70.202 22.962, 70.054 23.931, 70.463 31.698 C 70.754 37.228, 71.381 40.625, 72.209 41.150 C 72.919 41.601, 76.313 41.976, 79.750 41.985 L 86 42 86 61.918 C 86 72.873, 86.273 82.548, 86.607 83.418 C 86.941 84.288, 88.403 85.056, 89.857 85.125 C 91.551 85.205, 90.884 85.538, 88 86.051 C 82.598 87.012, 48.555 87.261, 44.109 86.372 C 41.258 85.802, 41.131 85.625, 42.734 84.454 C 44.299 83.312, 44.535 80.924, 44.810 63.507 C 45.018 50.364, 44.759 43.415, 44.031 42.538 C 43.145 41.470, 44.159 41.323, 49.490 41.751 C 58.785 42.497, 59.895 41.324, 59.567 31.091 C 59.431 26.820, 58.984 22.783, 58.575 22.121 C 58.046 21.266, 53.862 20.957, 44.128 21.055 L 30.426 21.193 28.713 24.178 M 63.343 23.195 C 62.879 23.913, 62.349 32.372, 62.164 41.994 C 61.935 53.874, 61.454 59.726, 60.664 60.229 C 60.024 60.636, 58.263 60.976, 56.750 60.985 C 55.237 60.993, 54 61.353, 54 61.784 C 54 62.215, 56.461 64.998, 59.468 67.968 L 64.936 73.368 67.133 71.434 C 70.727 68.271, 75.944 62.556, 75.973 61.750 C 75.988 61.337, 74.961 61, 73.691 61 C 68.354 61, 68.047 59.940, 67.763 40.513 C 67.532 24.691, 67.301 22.487, 65.843 22.207 C 64.932 22.032, 63.807 22.477, 63.343 23.195 M 32.174 28.868 C 33.453 30.446, 34.657 31.602, 34.848 31.437 C 35.390 30.970, 31.603 26.067, 30.674 26.031 C 30.220 26.014, 30.895 27.291, 32.174 28.868 M 97.149 27.604 C 96.406 28.444, 95.996 29.330, 96.239 29.572 C 96.481 29.814, 97.496 29.110, 98.494 28.006 C 99.493 26.903, 99.903 26.017, 99.405 26.038 C 98.907 26.059, 97.892 26.764, 97.149 27.604 M 39.032 35.528 C 39.086 37.177, 41.938 40.395, 42.684 39.649 C 43.072 39.262, 42.401 37.957, 41.194 36.750 C 39.987 35.543, 39.014 34.993, 39.032 35.528 M 37.813 85.683 C 38.534 85.972, 39.397 85.936, 39.729 85.604 C 40.061 85.272, 39.471 85.036, 38.417 85.079 C 37.252 85.127, 37.015 85.364, 37.813 85.683", "0 0 131 118"],
])

changeSvgs([
  ['[data-testid="control-button-skip-back"] svg, [data-testid="control-button-skip-forward"] svg',
    "M 15.310 7.635 C 14.904 8.693, 15.161 9.554, 15.962 9.821 C 18.138 10.546, 25 17.135, 25 18.500 C 25 19.922, 17.529 27, 16.029 27 C 15.497 27, 15.319 27.667, 15.631 28.482 C 16.410 30.512, 18.559 29.238, 24.276 23.357 L 28.904 18.596 24.702 14.020 C 22.391 11.503, 19.483 8.644, 18.240 7.667 C 16.095 5.982, 15.945 5.980, 15.310 7.635 M 23.332 7.577 C 22.903 8.696, 23.142 9.547, 23.962 9.821 C 26.138 10.546, 33 17.135, 33 18.500 C 33 19.938, 25.521 27, 23.997 27 C 22.651 27, 22.726 29.713, 24.096 30.559 C 25.108 31.185, 26.981 29.488, 34.115 21.478 L 36.807 18.455 32.154 13.475 C 25.266 6.103, 24.177 5.375, 23.332 7.577 M 7.750 15.165 C 5.687 16.282, 4 17.795, 4 18.528 C 4 20.235, 12.112 24.318, 14.565 23.845 C 15.592 23.648, 17.095 22.303, 17.906 20.858 C 19.228 18.503, 19.203 17.959, 17.667 15.615 C 15.614 12.481, 12.930 12.359, 7.750 15.165 M 10.363 17.497 C 10.017 18.398, 10.196 19.596, 10.761 20.161 C 12.391 21.791, 15.500 20.692, 15.500 18.486 C 15.500 15.943, 11.272 15.128, 10.363 17.497 M 5.694 17.639 C 4.895 18.438, 5.798 20, 7.059 20 C 7.577 20, 8 19.325, 8 18.500 C 8 16.954, 6.820 16.513, 5.694 17.639", "0 0 42 38"],
])

changeSvgs([
  ['button[aria-label="Lecture"] svg',
    "M 11 11.455 C 11 11.801, 11.955 13.077, 13.122 14.292 C 16.929 18.253, 21 24.264, 21 25.923 C 21 26.816, 24.600 31.126, 29 35.500 C 33.400 39.874, 37 44.306, 37 45.349 C 37 46.391, 33.400 50.933, 29 55.440 C 24.600 59.948, 21 64.239, 21 64.976 C 21 65.713, 19.136 68.731, 16.859 71.683 C 14.581 74.635, 12.965 77.298, 13.267 77.601 C 14.458 78.791, 49 47.394, 49 45.120 C 49 44.193, 44.654 39.625, 39.343 34.967 C 34.031 30.310, 27.230 24.260, 24.229 21.522 C 18.037 15.872, 11 10.517, 11 11.455 M 39.766 30.770 C 47.613 38.322, 54.026 44.867, 54.016 45.315 C 53.997 46.268, 46.548 53.444, 34.619 64 C 26.378 71.291, 24.932 73, 26.998 73 C 28.860 73, 49.466 57.747, 55.460 51.933 C 61.038 46.522, 61.336 46.003, 60.113 43.826 C 57.699 39.528, 29.523 17.084, 26.500 17.051 C 25.950 17.046, 31.920 23.219, 39.766 30.770 M 19.223 41.557 C 16.584 43.405, 16.428 45.197, 18.615 48.535 C 20.608 51.577, 22.316 51.651, 24.961 48.811 C 27.486 46.101, 27.553 43.811, 25.171 41.655 C 22.905 39.604, 22.030 39.590, 19.223 41.557 M 24 74.500 C 24 74.775, 24.225 75, 24.500 75 C 24.775 75, 25 74.775, 25 74.500 C 25 74.225, 24.775 74, 24.500 74 C 24.225 74, 24 74.225, 24 74.500", "0 0 62 89"],
  ['button[aria-label="Play"] svg',
    "M 11 11.455 C 11 11.801, 11.955 13.077, 13.122 14.292 C 16.929 18.253, 21 24.264, 21 25.923 C 21 26.816, 24.600 31.126, 29 35.500 C 33.400 39.874, 37 44.306, 37 45.349 C 37 46.391, 33.400 50.933, 29 55.440 C 24.600 59.948, 21 64.239, 21 64.976 C 21 65.713, 19.136 68.731, 16.859 71.683 C 14.581 74.635, 12.965 77.298, 13.267 77.601 C 14.458 78.791, 49 47.394, 49 45.120 C 49 44.193, 44.654 39.625, 39.343 34.967 C 34.031 30.310, 27.230 24.260, 24.229 21.522 C 18.037 15.872, 11 10.517, 11 11.455 M 39.766 30.770 C 47.613 38.322, 54.026 44.867, 54.016 45.315 C 53.997 46.268, 46.548 53.444, 34.619 64 C 26.378 71.291, 24.932 73, 26.998 73 C 28.860 73, 49.466 57.747, 55.460 51.933 C 61.038 46.522, 61.336 46.003, 60.113 43.826 C 57.699 39.528, 29.523 17.084, 26.500 17.051 C 25.950 17.046, 31.920 23.219, 39.766 30.770 M 19.223 41.557 C 16.584 43.405, 16.428 45.197, 18.615 48.535 C 20.608 51.577, 22.316 51.651, 24.961 48.811 C 27.486 46.101, 27.553 43.811, 25.171 41.655 C 22.905 39.604, 22.030 39.590, 19.223 41.557 M 24 74.500 C 24 74.775, 24.225 75, 24.500 75 C 24.775 75, 25 74.775, 25 74.500 C 25 74.225, 24.775 74, 24.500 74 C 24.225 74, 24 74.225, 24 74.500", "0 0 62 89"],
])

changeSvgs([
  ['button[aria-label="Pause"] svg',
    "M 51 35.647 C 25.379 50.314, 18.867 54.354, 16.978 56.755 C 15.122 59.115, 15 60.881, 15 85.500 C 15 116.197, 14.388 114.349, 26.781 121.098 C 31.026 123.411, 41.321 129.284, 49.658 134.151 C 57.994 139.018, 65.269 143, 65.823 143 C 66.722 143, 93.134 127.804, 108.261 118.584 C 111.840 116.402, 114.427 114.018, 115.092 112.286 C 115.823 110.384, 115.936 101.019, 115.447 82.766 L 114.732 56.033 111.616 53.692 C 102.197 46.615, 69.163 28.990, 65.395 29.032 C 63.704 29.051, 57.715 31.803, 51 35.647 M 56.711 45.996 C 56.330 47.453, 56.885 48.534, 58.585 49.648 C 62.016 51.896, 61.631 52.605, 56.250 53.947 C 38.272 58.431, 25.436 78.045, 28.991 95.604 C 29.648 98.847, 31.268 103.469, 32.592 105.876 C 33.917 108.283, 35 110.668, 35 111.177 C 35 111.686, 33.330 113.632, 31.289 115.501 C 28.136 118.390, 27.838 119.001, 29.306 119.564 C 30.486 120.017, 31.685 119.398, 33.089 117.613 C 35.577 114.451, 38.044 114.285, 40.595 117.108 C 42.903 119.662, 50.635 123.681, 56.901 125.582 C 74.970 131.067, 95.447 119.144, 101.450 99.643 C 104.849 88.604, 102.126 75.742, 94.395 66.306 C 90.331 61.346, 90.555 60.384, 97.112 54.636 C 100.340 51.807, 101.059 50.659, 100.163 49.763 C 99.268 48.868, 97.982 49.583, 94.708 52.796 C 90.335 57.088, 88.255 57.855, 86.297 55.897 C 85.690 55.290, 82.838 54.626, 79.959 54.421 C 77.079 54.215, 73.885 53.781, 72.862 53.456 C 70.375 52.667, 70.493 50.296, 73.058 49.481 C 74.457 49.038, 75.018 48.134, 74.808 46.664 C 74.523 44.663, 73.851 44.478, 65.876 44.213 C 57.874 43.946, 57.214 44.075, 56.711 45.996 M 55.500 60.672 C 53.300 61.428, 50.753 62.937, 49.840 64.024 C 48.927 65.111, 47.497 66, 46.662 66 C 45.828 66, 44.222 67.237, 43.094 68.750 C 41.966 70.263, 40.339 72.232, 39.477 73.126 C 38.615 74.021, 37.818 76.046, 37.705 77.626 C 37.592 79.207, 36.952 81.080, 36.283 81.788 C 33.422 84.817, 36.154 102.400, 40.079 106.216 C 41.050 107.160, 42.127 108.825, 42.473 109.915 C 43.051 111.735, 46.459 113.671, 48.250 113.198 C 48.663 113.089, 49 113.685, 49 114.521 C 49 116.102, 50.728 116.999, 57.500 118.936 C 64.591 120.963, 78.230 118.931, 82.347 115.233 C 83.531 114.169, 85.294 113.018, 86.265 112.675 C 87.236 112.332, 88.422 111.027, 88.900 109.776 C 89.379 108.524, 90.722 106.643, 91.885 105.595 C 93.048 104.547, 94 102.500, 94 101.045 C 94 99.590, 94.490 97.910, 95.088 97.312 C 96.702 95.698, 96.846 85.258, 95.296 82.270 C 94.564 80.858, 94.179 79.487, 94.442 79.224 C 95.332 78.334, 91.959 73, 90.506 73 C 89.712 73, 89.285 72.422, 89.556 71.715 C 90.153 70.159, 86.481 66, 84.511 66 C 83.734 66, 82.719 65.320, 82.253 64.488 C 79.837 60.170, 63.667 57.863, 55.500 60.672 M 55.200 75.200 C 53.534 76.866, 53.534 102.134, 55.200 103.800 C 56.830 105.430, 58.550 105.308, 60.429 103.429 C 62.726 101.131, 62.726 77.869, 60.429 75.571 C 58.550 73.692, 56.830 73.570, 55.200 75.200 M 71.642 75.180 C 70.243 75.964, 70 78.145, 70 89.943 C 70 101.854, 70.229 103.874, 71.641 104.416 C 73.763 105.230, 76.981 104.202, 77.065 102.683 C 77.172 100.748, 77.197 78.638, 77.094 76.867 C 76.980 74.879, 73.889 73.923, 71.642 75.180",
    "0 0 130 163"
  ],
])

/**
 * @param {(els: HTMLElement[]) => void} func 
 */
function waitForElement(els, func, timeout = 100) {
  const queries = els.map((el) => document.querySelector(el));
  if (queries.every((a) => a)) {
    func(queries);
  } else if (timeout > 0) {
    setTimeout(waitForElement, 300, els, func, --timeout);
  }
}

// dynamic-bg.js
// console.log(Spicetify.Player.data.item.uri);
console.log("[DEBUG] pdynamic-bg.js chargé avec succès à " + new Date().toLocaleTimeString());

(function () {
    if (!Spicetify?.Player?.addEventListener) {
        setTimeout(arguments.callee, 500);
        return;
    }

    console.log("[DEBUG] Player détecté – écoute activée");

    const TRACK_BACKGROUNDS = {
        "spotify:track:7mykoq6R3BArsSpNDjFQTm": "url('https://github.com/me974974/CyberNight/blob/main/assets/i_really_want_to_stay_at_your_house.png?raw=true')",
        "spotify:track:1qpGMJi0ippCaMUOs7cz2q": "url('https://github.com/me974974/CyberNight/blob/main/assets/let_you_down.png?raw=true')",
    };

    const ROOT = document.documentElement;
    const CONTAINER = () => document.querySelector(".Root__top-container");

    let defaultBg = getComputedStyle(ROOT).getPropertyValue("--image_url").trim();

    function updateTrackBackground() {
        const container = CONTAINER();
        if (!container) return;

        const currentUri = Spicetify.Player.data?.item?.uri;

        if (!currentUri) {
            container.classList.remove("has-custom-track-bg");
            return;
        }

        const customImage = TRACK_BACKGROUNDS[currentUri];

        if (customImage) {
            ROOT.style.setProperty("--image_url", customImage);
            container.classList.add("has-custom-track-bg");
        } else {
            container.classList.remove("has-custom-track-bg");
        }
    }

    Spicetify.Player.addEventListener("songchange", () => {
        console.log("[DEBUG] songchange détecté");
        updateTrackBackground();
    });

    // Sécurité polling (toutes les ~1.4s)
    let lastUri = "";
    const safetyCheck = setInterval(() => {
        const nowUri = Spicetify.Player.data?.item?.uri || "";
        if (nowUri !== lastUri) {
            console.log("[DEBUG] Changement détecté par polling → URI:", nowUri);
            lastUri = nowUri;
            updateTrackBackground();
        }
    }, 1400);

    // Premier déclenchement
    setTimeout(() => {
        console.log("[DEBUG] Premier check lancé");
        updateTrackBackground();
    }, 800);

    // Nettoyage si page fermée (optionnel)
    window.addEventListener("beforeunload", () => clearInterval(safetyCheck));
})();