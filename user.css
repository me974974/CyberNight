/* ===============================
   CYBERNIGHT – EDGERUNNERS GLASS
   =============================== */

:root {
    --glass-bg: rgba(8, 18, 32, 0.55);
    --glass-strong: rgba(8, 18, 32, 0.75);
    --cyan: #00F0FF;
    --sandevistan: #00FF9C;
    --text-main: #E6F1FF;
    --text-soft: #9FB3C8;
}

/* Fond global via GitHub (supprime l'ancien ::before si présent) */
.Root__top-container {
    background-color: transparent !important;
    background-image: url("https://github.com/me974974/CyberNight/blob/main/assets/nightcity.png?raw=true") !important;
    background-size: cover !important;
    background-position: center !important;
    background-repeat: no-repeat !important;
    background-attachment: fixed !important;
}

/* Overlay sombre optionnel pour meilleure lisibilité */
.Root__top-container::after {
    content: "";
    position: fixed;
    inset: 0;
    background: rgba(8, 18, 32, 0.35);
    pointer-events: none;
    z-index: -1;
}

/* Glassmorphism sur les panneaux principaux */
.Root__main-view,
.main-yourLibraryX-library,
#Desktop_PanelContainer_Id,
.Root__right-sidebar,
.Root__now-playing-bar {
    background: var(--glass-bg) !important;
    backdrop-filter: blur(18px) !important;
    -webkit-backdrop-filter: blur(18px) !important;
    border-radius: 14px;
    border: 1px solid rgba(0, 240, 255, 0.08);
    position: relative;
    z-index: 2;
}

/* Sidebar */
.Root__nav-bar {
    background: rgba(8, 18, 32, 0.65) !important;
    backdrop-filter: blur(12px) !important;
}

/* Textes */
* {
    color: var(--text-main) !important;
}

span,
div[data-testid="context-item-info-subtitle"] {
    color: var(--text-soft) !important;
}

/* Barre player gradient */
.Root__now-playing-bar {
    background: linear-gradient(90deg, rgba(0, 240, 255, 0.15), rgba(108, 92, 231, 0.25)) !important;
    border-radius: 16px;
}

/* Bouton play glow */
button[data-testid="control-button-playpause"] {
    background-color: var(--cyan) !important;
    box-shadow: 0 0 12px var(--cyan);
    border-radius: 50%;
    transition: all 0.2s ease;
}

button[data-testid="control-button-playpause"]:hover {
    box-shadow: 0 0 18px var(--cyan), 0 0 30px rgba(0, 240, 255, 0.4);
}

/* Hover glitch léger */
button[data-testid^="control-button"]:hover {
    transform: translateX(1px) skewX(-2deg);
}

/* Barre de progression Sandevistan */
.x-progressBar-fillColor {
    background: linear-gradient(90deg, var(--sandevistan), var(--cyan)) !important;
    box-shadow: 0 0 10px var(--sandevistan);
}

.progress-bar__slider {
    background: var(--sandevistan) !important;
    box-shadow: 0 0 8px var(--sandevistan);
}

/* Scrollbar custom */
::-webkit-scrollbar {
    width: 8px;
}

::-webkit-scrollbar-track {
    background: rgba(0, 0, 0, 0.2);
}

::-webkit-scrollbar-thumb {
    background: var(--sandevistan);
    border-radius: 10px;
    box-shadow: 0 0 6px var(--sandevistan);
}

::-webkit-scrollbar-thumb:hover {
    background: var(--cyan);
}

/* Sélection active */
[aria-selected="true"] {
    background: rgba(0, 240, 255, 0.1) !important;
    border-left: 2px solid var(--cyan);
}

/* Glow smart shuffle & boutons actifs */
.cyber-smart svg,
button[aria-checked="true"] svg {
    filter: drop-shadow(0 0 8px #00FF9C);
}

/* Masque gradient sur header artiste */
.main-view-container .before-scroll-node > * > :first-child {
    mask-image: linear-gradient(to bottom, black 90%, transparent);
    position: absolute;
}

/* Gestion fullscreen lyrics / library étendue */
#main:has(#VideoPlayerCinema_ReactPortal) .Root__main-view,
#main:has(#VideoPlayerCinema_ReactPortal) .Root__right-sidebar,
#main:has(#VideoPlayerCinema_ReactPortal) .Root__nav-bar {
    display: none !important;
}

#main:has(.main-yourLibraryX-libraryRootlist > * > ul[role="treegrid"]) .Root__main-view {
    display: none !important;
}

/* Éléments glass supplémentaires */
.view-homeShortcutsGrid-shortcut,
#Desktop_PanelContainer_Id,
.Root__main-view,
.main-yourLibraryX-library,
.ChipInnerComponent-sm {
    background-color: var(--glass-bg) !important;
}